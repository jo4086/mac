# terminal.js - CLI 계산기

**terminal.js**는 Node.js 기반의 CLI 계산기로, 수식 계산, 변수 캐시, 행렬 입력, 결과 추적 등을 지원합니다. 직관적인 명령어와 유연한 입력 방식으로 터미널 환경에서의 계산을 더욱 강력하게 만들어줍니다.

---

## 1. 개요

- **프로젝트명**: terminal.js
- **형태**: Node.js CLI 도구
- **언어**: TypeScript
- **의존성**:
  - mathjs - 수식 파싱 및 계산
  - chalk - 터미널 컬러 출력
- **실행 방법**: 설치 또는 `npx` 실행

---

## 2. 주요 기능

### 2.1 수식 계산

- 일반 연산 지원: `a = 1 + 2 * sin(30)`
- 삼각함수 자동 deg 처리: `cos(30)` → `cos(30 deg)`
- 쉼표 포함 숫자 자동 파싱: `1,000 + 500`
- 자동 소수점 안정화 처리 (1e-10 미만 → 0)
- 결과 자동 포매팅 (`toLocaleString`)
- 벡터/행렬 연산 지원

### 2.2 변수 및 세션

- 변수 캐싱 지원
- 세션 저장/불러오기
- 변수 타입 변경 시 경고 출력
- 계산 트레이스 기능 (`@trace x` 예정)

---

## 3. 행렬 입력 기능

### 3.1 고정 크기 입력

```text
a[2 3] =
1: 1 2 3
2: 4 5 6
```

### 3.2 자유 크기 입력

```text
a[] =
> [0×0] 1: 2 3 5
> [1×3] 2: 4 1
[!] 열이 부족합니다 (3개 중 2개 입력됨)
```

- 입력 시 `[행 × 열]` 상태 실시간 표시
- `?check` 명령어로 현재 행렬 입력 상태 확인 가능
- 부족한 열은 0으로 자동 보정 (선택적)

---

## 4. 행렬 조작

- 특정 행 추출: `a2[row]`
- 특정 열 추출: `a1[col]`
- 추출 시 변수 자동 생성: `a2[row] = [3, 4]`

---

## 5. 명령어 요약

| 명령어     | 설명                           |
| ---------- | ------------------------------ |
| `?list`    | 현재 변수 목록 출력            |
| `?var x`   | 변수 x의 값 확인               |
| `?clear`   | 모든 변수 초기화               |
| `?check`   | 행렬 입력 중 상태 확인         |
| `@trace x` | 변수 x의 참조 관계 추적 (예정) |
| `@save`    | 세션 수동 저장                 |
| `@load`    | 마지막 세션 불러오기           |
| `!exit`    | 프로그램 종료                  |

---

## 6. 로그 저장 및 출력

- 모든 계산 기록은 `calc-log.json`에 자동 저장됨
- 로그 구조:
  - `timestamp`
  - `input`: 입력 수식
  - `result`: 계산 결과
- 뷰어 도구 (`viewer.js`)를 통해 로그 열람 가능
- 컬러, 정렬, 에러 포함 여부 필터 지원

예시 출력:

```text
#1 [2025-07-27 20:23:46]
    x: cos(30)                                 → 0.8660254037844387
    y: sin(30)                                 → 0.49999999999999994
  dot: dot([x, y], [1, 0])                     → 0.8660254037844387
```

---

## 7. 향후 확장 예정

- CLI 테마 지원 (`@theme dark`)
- 변수 타입 표시 (`a: number`, `b: Matrix(3×2)`)
- 출력 포맷 옵션 (`--plain`, `--md`)
- 결과 내보내기 (`?export csv|json`)
- 세션 자동 로딩
- 변수 참조 트리 시각화

---

## 8. 설치 및 실행

```bash
# 로컬에서 실행
node bin/terminal.js

# npx 사용 (예정)
npx terminal
```

---

## 9. 라이선스

MIT License
